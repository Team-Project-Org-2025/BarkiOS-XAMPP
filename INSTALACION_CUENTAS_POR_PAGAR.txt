â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   INSTALACIÃ“N DEL MÃ“DULO DE CUENTAS POR PAGAR
   Garage Barki - Sistema BarkiOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… ARCHIVOS CREADOS:

1. MODELO (Backend)
   ğŸ“ app/models/AccountsPayable.php
   - Gestiona operaciones CRUD de cuentas por pagar
   - Concatena informaciÃ³n de proveedores
   - MÃ©todos: getAll(), add(), update(), delete(), registrarPago()

2. CONTROLADOR (Backend)
   ğŸ“ app/controllers/Admin/AccountsPayableController.php
   - Maneja peticiones AJAX
   - Validaciones de datos
   - BÃºsqueda de proveedores
   - Endpoints: add_ajax, get_accounts, search_supplier, etc.

3. VISTA (Frontend)
   ğŸ“ app/views/admin/accountsPayable.php
   - Interfaz de usuario adaptada para proveedores
   - Modal de agregar cuenta
   - Tabla de visualizaciÃ³n

4. JAVASCRIPT
   ğŸ“ public/assets/js/accountsPayable.js
   - BÃºsqueda en tiempo real de proveedores
   - ValidaciÃ³n de formularios
   - Carga dinÃ¡mica de datos con AJAX

5. BASE DE DATOS
   ğŸ“ database/create_cuentas_pagar.sql
   - Script completo de creaciÃ³n de tabla
   - Vista para reportes
   - Trigger automÃ¡tico de vencimiento
   - Procedimiento de estadÃ­sticas

6. MIGRACIÃ“N
   ğŸ“ database/migration_add_activo_proveedores.sql
   - Agrega campo 'activo' a tabla proveedores
   - Necesario para eliminaciÃ³n lÃ³gica

7. DOCUMENTACIÃ“N
   ğŸ“ docs/CUENTAS_POR_PAGAR_README.md
   - GuÃ­a completa del mÃ³dulo
   - Arquitectura y diseÃ±o
   - Troubleshooting


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PASOS DE INSTALACIÃ“N
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PASO 1: ACTUALIZAR TABLA PROVEEDORES
-------------------------------------
1. Abre phpMyAdmin (http://localhost/phpmyadmin)
2. Selecciona la base de datos: barkios_db
3. Ve a la pestaÃ±a "SQL"
4. Copia y pega el contenido de:
   database/migration_add_activo_proveedores.sql
5. Haz clic en "Continuar"

âœ… Resultado esperado: 
   "MigraciÃ³n completada exitosamente"


PASO 2: CREAR TABLA CUENTAS_PAGAR
----------------------------------
1. En phpMyAdmin, misma base de datos (barkios_db)
2. Ve a la pestaÃ±a "SQL"
3. Copia y pega el contenido de:
   database/create_cuentas_pagar.sql
4. Haz clic en "Continuar"

âœ… Resultado esperado:
   - Tabla "cuentas_pagar" creada
   - Vista "vista_cuentas_pagar" creada
   - Trigger "trg_actualizar_estado_vencido" creado
   - Procedimiento "sp_estadisticas_cuentas_pagar" creado


PASO 3: VERIFICAR INSTALACIÃ“N
------------------------------
Ejecuta estos comandos SQL para verificar:

-- Ver estructura de la tabla
DESCRIBE cuentas_pagar;

-- Ver proveedores activos
SELECT * FROM proveedores WHERE activo = 1;

-- Probar procedimiento de estadÃ­sticas
CALL sp_estadisticas_cuentas_pagar();

-- Ver vista de reportes
SELECT * FROM vista_cuentas_pagar;


PASO 4: CONFIGURAR RUTAS (SI ES NECESARIO)
-------------------------------------------
Verifica que en tu archivo de rutas (index.php o router) exista:

case '/admin/cuentas-pagar':
case '/admin/accountspayable':
    require_once __DIR__ . '/app/controllers/Admin/AccountsPayableController.php';
    break;


PASO 5: PROBAR EL MÃ“DULO
-------------------------
1. Inicia XAMPP (Apache + MySQL)
2. Navega a: http://localhost/BarkiOS/admin/cuentas-pagar
   (O la ruta que hayas configurado)
3. DeberÃ­as ver la interfaz de Cuentas por Pagar


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   DATOS DE PRUEBA (OPCIONAL)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Si no tienes proveedores, crea uno de prueba:

INSERT INTO proveedores (id, nombre_empresa, nombre_contacto, direccion, tipo_rif, activo)
VALUES ('J987654321', 'Distribuidora Fashion USA', 'MarÃ­a GonzÃ¡lez', 'Miami, FL', 'J', 1);

Luego crea una cuenta por pagar de prueba:

INSERT INTO cuentas_pagar 
  (proveedor_id, factura_numero, fecha_emision, fecha_vencimiento, monto_total, estado) 
VALUES 
  ('J987654321', 'FACT-2025-001', CURDATE(), DATE_ADD(CURDATE(), INTERVAL 30 DAY), 10000.00, 'Pendiente');


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   USO DEL MÃ“DULO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

AGREGAR CUENTA POR PAGAR:
1. Clic en botÃ³n "Agregar cuenta"
2. Ingresa nÃºmero de factura
3. Busca el proveedor (escribe mÃ­nimo 2 letras)
4. Selecciona el proveedor de la lista
5. Ingresa fechas y monto
6. Clic en "Guardar"

VISUALIZAR CUENTAS:
- La tabla muestra todas las cuentas activas
- Ordenadas por fecha de vencimiento
- Con badges de color segÃºn estado:
  â€¢ Amarillo = Pendiente
  â€¢ Verde = Pagada
  â€¢ Rojo = Vencida
  â€¢ Azul = Parcial


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   DIFERENCIAS CON CUENTAS POR COBRAR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

CUENTAS POR COBRAR:                CUENTAS POR PAGAR:
- CrÃ©dito a clientes VIP           - CrÃ©dito de proveedores
- Busca clientes                   - Busca proveedores
- Ventas a crÃ©dito                 - Compras a crÃ©dito
- Clientes deben a Barki           - Barki debe a proveedores
- Solo clientes VIP                - Todos los proveedores


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ESTRUCTURA DE LA BASE DE DATOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

TABLA: cuentas_pagar
+--------------------+---------------+-------------------------------+
| Campo              | Tipo          | DescripciÃ³n                   |
+--------------------+---------------+-------------------------------+
| id                 | INT(11)       | ID Ãºnico (auto-increment)     |
| proveedor_id       | VARCHAR(12)   | RIF del proveedor             |
| factura_numero     | VARCHAR(50)   | NÃºmero de factura             |
| fecha_emision      | DATE          | Fecha de emisiÃ³n              |
| fecha_vencimiento  | DATE          | Fecha de vencimiento          |
| fecha_pago         | DATETIME      | Fecha real de pago            |
| monto_total        | DECIMAL(10,2) | Monto a pagar                 |
| estado             | ENUM          | Pendiente/Pagada/Vencida      |
| activo             | TINYINT(1)    | 1=activo, 0=eliminado         |
| created_at         | TIMESTAMP     | Fecha de creaciÃ³n             |
| updated_at         | TIMESTAMP     | Ãšltima actualizaciÃ³n          |
+--------------------+---------------+-------------------------------+

FOREIGN KEY: proveedor_id â†’ proveedores(id)


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TROUBLESHOOTING
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âŒ Error: "Proveedor no existe"
   SoluciÃ³n: Verifica que el proveedor tenga activo=1
   
   SELECT * FROM proveedores WHERE activo = 1;

âŒ Error: "Factura duplicada"
   SoluciÃ³n: El nÃºmero de factura debe ser Ãºnico
   
   SELECT * FROM cuentas_pagar 
   WHERE factura_numero = 'TU_FACTURA' AND activo = 1;

âŒ No aparecen proveedores en la bÃºsqueda
   SoluciÃ³n: Verifica que existan proveedores con activo=1
   y que el controlador estÃ© accesible

âŒ Error 404 en la ruta
   SoluciÃ³n: Verifica la configuraciÃ³n de rutas en tu
   archivo router/index.php


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   INTEGRACIÃ“N FUTURA CON MÃ“DULO DE COMPRAS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Cuando implementes el mÃ³dulo de Compras:

1. Al registrar una compra a crÃ©dito, automÃ¡ticamente se
   puede crear una cuenta por pagar

2. Vincular la cuenta con los detalles de productos comprados

3. Ver historial completo de compras por proveedor

4. Generar reportes de gastos y deudas


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CARACTERÃSTICAS IMPLEMENTADAS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… CRUD completo (Crear, Leer, Actualizar, Eliminar)
âœ… BÃºsqueda en tiempo real de proveedores
âœ… ValidaciÃ³n de datos (servidor y cliente)
âœ… PrevenciÃ³n de SQL injection
âœ… EliminaciÃ³n lÃ³gica (soft delete)
âœ… Estados automÃ¡ticos (trigger de vencimiento)
âœ… Vista para reportes
âœ… Procedimiento de estadÃ­sticas
âœ… Interfaz responsive
âœ… Alertas con SweetAlert2
âœ… Formateo de moneda y fechas
âœ… Registro de pagos
âœ… Badges de estado con colores


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PRÃ“XIMAS MEJORAS SUGERIDAS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â–¡ Editar cuentas por pagar
â–¡ Dashboard con grÃ¡ficas
â–¡ Reportes en PDF
â–¡ Notificaciones de vencimiento por email
â–¡ Historial de pagos parciales
â–¡ ExportaciÃ³n a Excel
â–¡ IntegraciÃ³n con sistema contable
â–¡ MÃ³dulo de Compras completo


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SOPORTE Y DOCUMENTACIÃ“N
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“– DocumentaciÃ³n completa:
   docs/CUENTAS_POR_PAGAR_README.md

ğŸ“ Archivos principales:
   - Modelo: app/models/AccountsPayable.php
   - Controlador: app/controllers/Admin/AccountsPayableController.php
   - Vista: app/views/admin/accountsPayable.php
   - JavaScript: public/assets/js/accountsPayable.js

ğŸ—„ï¸ Scripts SQL:
   - database/create_cuentas_pagar.sql
   - database/migration_add_activo_proveedores.sql


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   Â¡INSTALACIÃ“N COMPLETA!
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Si seguiste todos los pasos, el mÃ³dulo estÃ¡ listo para usar.

Navega a: http://localhost/BarkiOS/admin/cuentas-pagar

Â¡Ã‰xito! ğŸ‰
